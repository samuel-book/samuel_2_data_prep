

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Disability at six months (completion) &#8212; SAMueL-2 Descriptive Analysis</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'sam2_disability_6months_completion';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Disability at six months (results)" href="sam2_disability_6months_results.html" />
    <link rel="prev" title="Correlations between features" href="sam1_correlations.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    <p class="title logo__title">SAMueL-2 Descriptive Analysis</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Descriptive analysis
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Set up</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01_reformat_data.html">Reformat data</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Based on SAMueL-1</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="sam1_pathway_statistics.html">Descriptive analysis of stroke pathway data</a></li>
<li class="toctree-l1"><a class="reference internal" href="sam1_thrombolysis_associations.html">Associations between thrombolysis use and patient features</a></li>
<li class="toctree-l1"><a class="reference internal" href="sam1_compare_by_thrombolysis.html">Comparison between patients who received thrombolysis versus not</a></li>
<li class="toctree-l1"><a class="reference internal" href="sam1_day_week_pathway_patterns.html">Daily and weekly pathway patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="sam1_pathway_distributions.html">Stroke pathway timing distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="sam1_correlations.html">Correlations between features</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">New for SAMueL-2</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Disability at six months (completion)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sam2_disability_6months_results.html">Disability at six months (results)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sam2_thrombectomy.html">Thrombectomy</a></li>
<li class="toctree-l1"><a class="reference internal" href="sam2_compare_years.html">Year by year comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="sam2_ambulance.html">Ambulance</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Fsam2_disability_6months_completion.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/sam2_disability_6months_completion.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Disability at six months (completion)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#context-about-measurement-of-disability">Context about measurement of disability</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aims">Aims</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#purpose-of-this-analysis">Purpose of this analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-up">Set up</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#completion-of-data-on-disability-at-six-months">Completion of data on disability at six months</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#factors-associated-with-completion">Factors associated with completion</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multiple-logistic-regression">Multiple logistic regression</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset">Dataset</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regression">Regression</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random-undersampling">Random undersampling</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <div class="tex2jax_ignore mathjax_ignore section" id="disability-at-six-months-completion">
<h1>Disability at six months (completion)<a class="headerlink" href="#disability-at-six-months-completion" title="Permalink to this headline">#</a></h1>
<p>In this notebook, we explore the completion of disability at six months</p>
<div class="section" id="context-about-measurement-of-disability">
<h2>Context about measurement of disability<a class="headerlink" href="#context-about-measurement-of-disability" title="Permalink to this headline">#</a></h2>
<p>Disability is measured using the modified Rankin Scale (mRS). The scale ranges from 0 to 6, where 0 is perfect health without symptoms and 6 is death. The dataset contains information on:</p>
<ul class="simple">
<li><p>Disability before the stroke</p></li>
<li><p>Disability at discharge</p></li>
<li><p>Disability at six months</p></li>
</ul>
</div>
<div class="section" id="aims">
<h2>Aims<a class="headerlink" href="#aims" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Investigate the completion of disability at six months</p></li>
</ul>
</div>
<div class="section" id="purpose-of-this-analysis">
<h2>Purpose of this analysis<a class="headerlink" href="#purpose-of-this-analysis" title="Permalink to this headline">#</a></h2>
<p>In other analyses, we are using discharge disability. One reason for that is because six month disability is so incomplete. This analysis looks into levels of completion and whether there are factors associated with completion (as we anticipate that it will not be missing at random).</p>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Of patients who were alive at discharge, <strong>35.4%</strong> have disability at 6 months</p></li>
<li><p>Completion of disability at 6 months varies substantially between stroke teams from <strong>10.25% to 99.95%</strong> of patients missing data</p></li>
<li><p>Using descriptive analysis (and note that some of these are very marginal differences), we see <strong>more missing data</strong> for patients:</p>
<ul>
<li><p>With more severe strokes or with no stroke symptoms</p></li>
<li><p>With greater discharge disability</p></li>
<li><p>Who were not thrombolysed</p></li>
<li><p>Who did not have an infarction</p></li>
<li><p>With greater prior disability</p></li>
<li><p>With younger or older age (least missing around apx. people in their 70s)</p></li>
</ul>
</li>
<li><p>Regression (with random undersampling to account for class imbalance) has very low accuracy</p></li>
</ul>
</div>
<div class="section" id="set-up">
<h2>Set up<a class="headerlink" href="#set-up" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import packages and functions</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">KFold</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="p">(</span><span class="n">confusion_matrix</span><span class="p">,</span> <span class="n">roc_curve</span><span class="p">,</span> <span class="n">auc</span><span class="p">)</span>

<span class="c1"># Set max rows when display dataframe</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="c1"># Linting</span>
<span class="o">%</span><span class="k">load_ext</span> pycodestyle_magic
<span class="o">%</span><span class="k">pycodestyle_on</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set paths and filenames</span>
<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Paths</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;Singleton object for storing paths to data and files.&#39;&#39;&#39;</span>

    <span class="n">data_path</span> <span class="o">=</span> <span class="s1">&#39;./../output/&#39;</span>
    <span class="n">data_filename</span> <span class="o">=</span> <span class="s1">&#39;reformatted_data.csv&#39;</span>
    <span class="n">admission_only_filename</span> <span class="o">=</span> <span class="s1">&#39;reformatted_data_admissions_only.csv&#39;</span>


<span class="n">paths</span> <span class="o">=</span> <span class="n">Paths</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load data</span>
<span class="n">data_full</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">paths</span><span class="o">.</span><span class="n">data_path</span><span class="p">,</span>
                                     <span class="n">paths</span><span class="o">.</span><span class="n">admission_only_filename</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="completion-of-data-on-disability-at-six-months">
<h2>Completion of data on disability at six months<a class="headerlink" href="#completion-of-data-on-disability-at-six-months" title="Permalink to this headline">#</a></h2>
<p><strong>Remove patients dead at discharge</strong></p>
<p>Data on disability at six months will not be available for patients who were dead (mRS score of 6) at discharge. Therefore, we will remove them from the analysis, and focus only on patients who were alive at discharge.</p>
<p>Of all the patients in the SSNAP dataset:</p>
<ul class="simple">
<li><p>13.9% were dead at discharge</p></li>
<li><p>85.4% had a disability score of 0 to 5</p></li>
<li><p>0.7% were missing data on disability at discharge</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Find proportion of patients with each discharge disability score</span>
<span class="n">display</span><span class="p">(</span><span class="n">data_full</span><span class="p">[</span><span class="s1">&#39;discharge_disability&#39;</span><span class="p">]</span>
        <span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="s1">&#39;Discharge Disability&#39;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
        <span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Proportion&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Discharge Disability</th>
      <th>Proportion</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.0</td>
      <td>0.129267</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.0</td>
      <td>0.211068</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2.0</td>
      <td>0.181825</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3.0</td>
      <td>0.160238</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4.0</td>
      <td>0.115781</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5.0</td>
      <td>0.055937</td>
    </tr>
    <tr>
      <th>6</th>
      <td>6.0</td>
      <td>0.138836</td>
    </tr>
    <tr>
      <th>7</th>
      <td>NaN</td>
      <td>0.007047</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remove patients who were dead at discharge</span>
<span class="n">data_full_alive</span> <span class="o">=</span> <span class="n">data_full</span><span class="p">[</span><span class="n">data_full</span><span class="p">[</span><span class="s1">&#39;death&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># Print count of remaining patients</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Patients not dead at discharge: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data_full_alive</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Patients not dead at discharge: 309046
</pre></div>
</div>
</div>
</div>
<p><strong>Find proportion missing disability at discharge and/or six months</strong></p>
<p>Of all the patients in the SSNAP dataset who were not dead at discharge:</p>
<ul class="simple">
<li><p>35.4% have data on disability at discharge and 6 months</p></li>
<li><p>63.8% are just missing disability at 6 months</p></li>
<li><p>0.8% are missing disability at discharge and 6 months</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">data_full_alive</span><span class="p">[[</span><span class="s1">&#39;discharge_disability&#39;</span><span class="p">,</span> <span class="s1">&#39;disability_6_month&#39;</span><span class="p">]]</span>
 <span class="o">.</span><span class="n">isnull</span><span class="p">()</span>
 <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="kc">True</span><span class="p">:</span> <span class="s1">&#39;Missing&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">:</span> <span class="s1">&#39;Not missing&#39;</span><span class="p">}))</span>
 <span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
 <span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;proportion&#39;</span><span class="p">)</span>
 <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;disability_6_month&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>discharge_disability</th>
      <th>disability_6_month</th>
      <th>proportion</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>Not missing</td>
      <td>Not missing</td>
      <td>0.353737</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Not missing</td>
      <td>Missing</td>
      <td>0.638119</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Missing</td>
      <td>Missing</td>
      <td>0.008144</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong>Visualise completion of disability at 6 months by team</strong></p>
<p>The graph presents the proportion of patients who were not dead at discharge and are missing disability at six months. We can see there is <strong>large variability</strong> between teams, from 10.25% missing data to 99.95% missing data.</p>
<p><strong>Important caveat:</strong> Each disability score (pre-stroke, discharge and 6 months) can be the responsibility of different stroke teams, as patients can be moved between teams for different services, but we are only provided one team name.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create columns where they are TRUE if missing disability</span>
<span class="n">data_full_alive</span><span class="p">[</span><span class="s1">&#39;missing_6_month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">data_full_alive</span><span class="p">[</span><span class="s1">&#39;disability_6_month&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">())</span>

<span class="c1"># Find proportion missing disability</span>
<span class="n">missing_6_month</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">data_full_alive</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;stroke_team&#39;</span><span class="p">)[</span><span class="s1">&#39;missing_6_month&#39;</span><span class="p">]</span>
    <span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="o">.</span><span class="n">sort_values</span><span class="p">())</span>

<span class="c1"># Describe</span>
<span class="n">display</span><span class="p">(</span><span class="n">missing_6_month</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>

<span class="c1"># Plot completion rate for 6 month disability in each team, ascending</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">missing_6_month</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
       <span class="n">height</span><span class="o">=</span><span class="n">missing_6_month</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Stroke team (ordered by proportion)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Proportion or patients missing 6 month disability&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    119.000000
mean       0.641830
std        0.214977
min        0.102513
25%        0.486390
50%        0.635166
75%        0.802901
max        0.999516
Name: missing_6_month, dtype: float64
</pre></div>
</div>
<img alt="_images/c88e250de5ac9b626144a4d63d2fc113e6615b15e4afc834b84285efaf930e18.png" src="_images/c88e250de5ac9b626144a4d63d2fc113e6615b15e4afc834b84285efaf930e18.png" />
</div>
</div>
<p><strong>Investigate whether completion is associated with size</strong></p>
<p>There appears to be no relationship between completion rate and the total patients who were alive at discharge.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Combine size with the proportion missing</span>
<span class="n">team_size</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">data_full_alive</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;stroke_team&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;alive_at_discharge&#39;</span><span class="p">))</span>
<span class="n">team_followup_size</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">missing_6_month</span><span class="p">,</span>
                                <span class="n">team_size</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1"># Find correlation</span>
<span class="n">team_followup_size</span><span class="p">[</span><span class="s1">&#39;alive_at_discharge&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span>
    <span class="n">team_followup_size</span><span class="p">[</span><span class="s1">&#39;missing_6_month&#39;</span><span class="p">])</span>

<span class="c1"># Create scatter plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">team_followup_size</span><span class="p">[</span><span class="s1">&#39;alive_at_discharge&#39;</span><span class="p">],</span>
           <span class="n">y</span><span class="o">=</span><span class="n">team_followup_size</span><span class="p">[</span><span class="s1">&#39;missing_6_month&#39;</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Total patients alive at discharge&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Proportion with missing 6-month follow-up&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/fe090141875c85f98218161e38fde035d95a2a5355a6cb9eff964af06fdbfdcb.png" src="_images/fe090141875c85f98218161e38fde035d95a2a5355a6cb9eff964af06fdbfdcb.png" />
</div>
</div>
</div>
<div class="section" id="factors-associated-with-completion">
<h2>Factors associated with completion<a class="headerlink" href="#factors-associated-with-completion" title="Permalink to this headline">#</a></h2>
<p>As above, this analysis only focusses on patients who were not marked as having died at discharge, else it would be an unfair comparison, as patients who died at discharge could not possibly have a six month follow up.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_proportion_missing_by_variable</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Creates plot of the proportion missing six month disability data</span>
<span class="sd">    When grouped by the specified variable.</span>
<span class="sd">    Inputs:</span>
<span class="sd">    variable - string</span>
<span class="sd">    ax - axis to plot on</span>
<span class="sd">    order - array defining order for x axis (default False)</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1"># Group, find proportion, display table, and plot</span>
    <span class="n">df</span> <span class="o">=</span> <span class="p">(</span><span class="n">data_full_alive</span>
          <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">variable</span><span class="p">)[</span><span class="s1">&#39;missing_6_month&#39;</span><span class="p">]</span>
          <span class="o">.</span><span class="n">mean</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">order</span><span class="p">:</span>
        <span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">order</span><span class="p">])</span>
        <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">order</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Proportion missing 6 month follow up&#39;</span><span class="p">)</span>

    <span class="c1"># Set consistent y axis with horizontal grid lines</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="n">minor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;minor&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_axisbelow</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>


<span class="c1"># Set up figure</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="c1"># Create stroke severity column with groups so can plot in same way as others</span>
<span class="n">conditions</span> <span class="o">=</span> <span class="p">[(</span><span class="n">data_full_alive</span><span class="p">[</span><span class="s1">&#39;stroke_severity&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">),</span>
              <span class="p">(</span><span class="n">data_full_alive</span><span class="p">[</span><span class="s1">&#39;stroke_severity&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))),</span>
              <span class="p">(</span><span class="n">data_full_alive</span><span class="p">[</span><span class="s1">&#39;stroke_severity&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">16</span><span class="p">))),</span>
              <span class="p">(</span><span class="n">data_full_alive</span><span class="p">[</span><span class="s1">&#39;stroke_severity&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">21</span><span class="p">))),</span>
              <span class="p">(</span><span class="n">data_full_alive</span><span class="p">[</span><span class="s1">&#39;stroke_severity&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="mi">43</span><span class="p">)))]</span>
<span class="n">nihss_choices</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;1-4&#39;</span><span class="p">,</span> <span class="s1">&#39;5-15&#39;</span><span class="p">,</span> <span class="s1">&#39;16-20&#39;</span><span class="p">,</span> <span class="s1">&#39;21-42&#39;</span><span class="p">]</span>
<span class="n">data_full_alive</span><span class="p">[</span><span class="s1">&#39;stroke_severity_groups&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">conditions</span><span class="p">,</span>
                                                      <span class="n">nihss_choices</span><span class="p">)</span>
<span class="n">plot_proportion_missing_by_variable</span><span class="p">(</span><span class="s1">&#39;stroke_severity_groups&#39;</span><span class="p">,</span>
                                    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">order</span><span class="o">=</span><span class="n">nihss_choices</span><span class="p">)</span>

<span class="c1"># Plot proportion missing by group</span>
<span class="n">plot_proportion_missing_by_variable</span><span class="p">(</span><span class="s1">&#39;discharge_disability&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">plot_proportion_missing_by_variable</span><span class="p">(</span><span class="s1">&#39;thrombolysis&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">plot_proportion_missing_by_variable</span><span class="p">(</span><span class="s1">&#39;infarction&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">plot_proportion_missing_by_variable</span><span class="p">(</span><span class="s1">&#39;prior_disability&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">plot_proportion_missing_by_variable</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>stroke_severity_groups
0        0.668312
1-4      0.639312
5-15     0.643820
16-20    0.662404
21-42    0.677691
Name: missing_6_month, dtype: float64
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>discharge_disability
0.0    0.654337
1.0    0.631467
2.0    0.623058
3.0    0.636253
4.0    0.668945
5.0    0.696239
Name: missing_6_month, dtype: float64
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>thrombolysis
0    0.647322
1    0.638126
Name: missing_6_month, dtype: float64
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>infarction
0.0    0.653785
1.0    0.645511
Name: missing_6_month, dtype: float64
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>prior_disability
0    0.641965
1    0.625371
2    0.647275
3    0.672922
4    0.698523
5    0.702144
Name: missing_6_month, dtype: float64
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>age
37.5    0.717289
42.5    0.693690
47.5    0.694955
52.5    0.679575
57.5    0.658418
62.5    0.647985
67.5    0.636270
72.5    0.626529
77.5    0.623241
82.5    0.630371
87.5    0.655567
92.5    0.673107
Name: missing_6_month, dtype: float64
</pre></div>
</div>
<img alt="_images/dc3d4542a8908a8195890faf03b06729ba5fb1647dd5fc01e7af59b0d851a4ff.png" src="_images/dc3d4542a8908a8195890faf03b06729ba5fb1647dd5fc01e7af59b0d851a4ff.png" />
</div>
</div>
<p>Observations:</p>
<ul class="simple">
<li><p><strong>Stroke severity:</strong> A slightly higher proportion of people with severe strokes are not followed up (NIHSS 21-42, 67.8%), then no symptoms (NIHSS 0, 66.8%) and moderate to severe strokes (NIHSS 16-20, 66.2%), with the least missing follow-up for moderate strokes (NIHSS 5-15, 64.4%) and mild strokes (NIHSS 1-4, 63.9%).</p></li>
<li><p><strong>Discharge disability:</strong> A slightly higher proportion of people with a greater discharge disability are missing follow-up (69.6%), with least missing for discharge disability of mRS 1 to 3 (but more again missing for mRS 0).</p></li>
<li><p><strong>Thrombolysis:</strong> A slightly lower proportion of thrombolysed patients are missing follow up (63.8%), compared with patients not thrombolysed (64.7%)</p></li>
<li><p><strong>Infarction:</strong> A slightly lower proportion of patients who had an infarction are missing follow up (64.6%), compared with patients who did not have an infarction (65.4%)</p></li>
<li><p><strong>Prior disability:</strong> A slightly higher proportion of people with a greater prior disability are missing follow up (eg. 70.2% of people who were mRS 5, compared with 64.2% mRS 0 and 62.5% mRS 1)</p></li>
<li><p><strong>Age:</strong> A higher proportion of people in the younger or older age categories are not followed up, with the least missing follow up in the  77.5 (i.e. 75 to 80 years old, 62.3% missing follow up)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># For stroke severity, compare distributions using overlaid histograms</span>
<span class="c1"># As number of patients at higher stroke severities is very small in</span>
<span class="c1"># each group, so doing proportion per group would be misleading</span>
<span class="c1"># (unless you created larger categories combining groups)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="c1"># Seperate out</span>
<span class="n">plot_missing</span> <span class="o">=</span> <span class="n">data_full_alive</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
    <span class="n">data_full_alive</span><span class="p">[</span><span class="s1">&#39;missing_6_month&#39;</span><span class="p">],</span> <span class="s1">&#39;stroke_severity&#39;</span><span class="p">]</span>
<span class="n">plot_present</span> <span class="o">=</span> <span class="n">data_full_alive</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
    <span class="o">~</span><span class="n">data_full_alive</span><span class="p">[</span><span class="s1">&#39;missing_6_month&#39;</span><span class="p">],</span> <span class="s1">&#39;stroke_severity&#39;</span><span class="p">]</span>

<span class="c1"># Plot overlapping histograms</span>
<span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">plot_missing</span><span class="p">,</span>
        <span class="n">weights</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">plot_missing</span><span class="p">))</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">plot_missing</span><span class="p">),</span>
        <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Missing&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">plot_present</span><span class="p">,</span>
        <span class="n">weights</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">plot_present</span><span class="p">))</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">plot_present</span><span class="p">),</span>
        <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Present&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Stroke severity (NIHSS)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Proportion&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="c1"># Describe results for each group</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="n">data_full_alive</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;missing_6_month&#39;</span><span class="p">)[</span><span class="s1">&#39;stroke_severity&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                    count      mean       std  min  25%  50%  75%   max
missing_6_month                                                        
False            109321.0  5.370002  5.683979  0.0  2.0  3.0  7.0  42.0
True             199725.0  5.511238  5.949742  0.0  2.0  3.0  7.0  42.0
</pre></div>
</div>
<img alt="_images/36391a32b00f7fad640b08542c98e59115763595f81850a4b2cef1f0607347c9.png" src="_images/36391a32b00f7fad640b08542c98e59115763595f81850a4b2cef1f0607347c9.png" />
</div>
</div>
<p>Observations: The stroke severity of followed-up patients is, on average, slightly higher (5.51 vs 5.37).</p>
</div>
<div class="section" id="multiple-logistic-regression">
<h2>Multiple logistic regression<a class="headerlink" href="#multiple-logistic-regression" title="Permalink to this headline">#</a></h2>
<div class="section" id="dataset">
<h3>Dataset<a class="headerlink" href="#dataset" title="Permalink to this headline">#</a></h3>
<p>The dataset is patients who have complete data data for discharge disability, stroke severity, age and whether thrombolysed. They can have incomplete data for 6-month follow-up (as that is what we are predicting).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract relevant columns, resetting index else set on slice</span>
<span class="n">reg_df</span> <span class="o">=</span> <span class="n">data_full</span><span class="p">[[</span>
    <span class="s1">&#39;prior_disability&#39;</span><span class="p">,</span> <span class="s1">&#39;stroke_severity&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span>
    <span class="s1">&#39;thrombolysis&#39;</span><span class="p">,</span> <span class="s1">&#39;discharge_disability&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Create column of whether had follow-up</span>
<span class="n">reg_df</span><span class="p">[</span><span class="s1">&#39;6_month_complete&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">data_full</span><span class="p">[</span><span class="s1">&#39;disability_6_month&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="kc">False</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">:</span> <span class="mi">0</span><span class="p">}))</span>

<span class="c1"># Drop NA</span>
<span class="n">reg_df</span> <span class="o">=</span> <span class="n">reg_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">reg_df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># Count values in each</span>
<span class="n">display</span><span class="p">(</span><span class="n">reg_df</span><span class="p">[</span><span class="s1">&#39;6_month_complete&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

<span class="c1"># Define predictor and response variables</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">reg_df</span><span class="p">[[</span><span class="s1">&#39;prior_disability&#39;</span><span class="p">,</span> <span class="s1">&#39;stroke_severity&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span>
            <span class="s1">&#39;thrombolysis&#39;</span><span class="p">,</span> <span class="s1">&#39;discharge_disability&#39;</span><span class="p">]]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">reg_df</span><span class="p">[</span><span class="s1">&#39;6_month_complete&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(356355, 6)
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0    0.693224
1    0.306776
Name: 6_month_complete, dtype: float64
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="regression">
<h3>Regression<a class="headerlink" href="#regression" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">standardise_data</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Put features on a similar scale through standardisation.</span>
<span class="sd">    Just transforms features (not response/target variable).</span>
<span class="sd">    Invovles subtracting mean and dividing by standard deviation (SD)</span>
<span class="sd">    of each feature, so data have mean of 0 and SD of 1.</span>
<span class="sd">    Test data is standardised on training data mean and SD.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># Set up scaling object and fit on training data</span>
    <span class="n">sc</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
    <span class="n">sc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>

    <span class="c1"># Apply scaling to training and test data</span>
    <span class="n">train_std</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
    <span class="n">test_std</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">train_std</span><span class="p">,</span> <span class="n">test_std</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">logistic_regression</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">standardise</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Run logistic regression with 5-fold cross-validation</span>
<span class="sd">    Can choose whether to standardise input variables or not</span>
<span class="sd">    Returns feature weights, accuracy and confusion matrix</span>
<span class="sd">    Inputs:</span>
<span class="sd">    df - dataframe containing variables used in regression</span>
<span class="sd">    standardise - true or false, whether want to standardise variables</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="c1"># Define predictor and response variables</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;prior_disability&#39;</span><span class="p">,</span> <span class="s1">&#39;stroke_severity&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span>
            <span class="s1">&#39;thrombolysis&#39;</span><span class="p">,</span> <span class="s1">&#39;discharge_disability&#39;</span><span class="p">]]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;6_month_complete&#39;</span><span class="p">]</span>

    <span class="c1"># Set up to create five training/test data splits</span>
    <span class="n">kfold</span> <span class="o">=</span> <span class="n">KFold</span><span class="p">(</span><span class="n">n_splits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Create empty dictionary to store results</span>
    <span class="c1"># (defaultdict so don&#39;t have to pre-define keys)</span>
    <span class="n">reg_results</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

    <span class="c1"># Use loop to test model on those five different splits</span>
    <span class="k">for</span> <span class="n">train_row</span><span class="p">,</span> <span class="n">test_row</span> <span class="ow">in</span> <span class="n">kfold</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
        <span class="c1"># Split into training and test data</span>
        <span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">train_row</span><span class="p">],</span> <span class="n">X</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">test_row</span><span class="p">]</span>
        <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">train_row</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">test_row</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">standardise</span><span class="p">:</span>
            <span class="c1"># Standardise X data</span>
            <span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span> <span class="o">=</span> <span class="n">standardise_data</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">)</span>

        <span class="c1"># Set up and fit multiple linear regression</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">()</span>
        <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

        <span class="c1"># Get feature weights</span>
        <span class="n">reg_results</span><span class="p">[</span><span class="s1">&#39;feature_weights&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">coef_</span><span class="p">)</span>

        <span class="c1"># Get accuracy</span>
        <span class="n">reg_results</span><span class="p">[</span><span class="s1">&#39;accuracy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>

        <span class="c1"># Get confusion matrix</span>
        <span class="n">predictions</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
        <span class="n">reg_results</span><span class="p">[</span><span class="s1">&#39;confusion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">predictions</span><span class="p">)</span>

        <span class="c1"># Calculate FPR and TPR for all thresholds of the classification</span>
        <span class="n">probs</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
        <span class="n">preds</span> <span class="o">=</span> <span class="n">probs</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">,</span> <span class="n">threshold</span> <span class="o">=</span> <span class="n">roc_curve</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">preds</span><span class="p">)</span>
        <span class="n">reg_results</span><span class="p">[</span><span class="s1">&#39;fpr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fpr</span>
        <span class="n">reg_results</span><span class="p">[</span><span class="s1">&#39;tpr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tpr</span>
        <span class="n">reg_results</span><span class="p">[</span><span class="s1">&#39;roc_auc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">auc</span><span class="p">(</span><span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">reg_results</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">logistic_regression</span><span class="p">(</span><span class="n">reg_df</span><span class="p">,</span> <span class="n">standardise</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">res</span><span class="p">[</span><span class="s1">&#39;confusion&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[49307,     8],
       [21940,    16]])
</pre></div>
</div>
</div>
</div>
<p>Predicts everything to not be a follow-up as that is the majority in the dataset. Would need to perform undersampling to balance the dataset.</p>
</div>
<div class="section" id="random-undersampling">
<h3>Random undersampling<a class="headerlink" href="#random-undersampling" title="Permalink to this headline">#</a></h3>
<p>Very simple method of undersampling - randomly removing points from the majority class until it has the same number of points as the majority class.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Seperate into minority and majority</span>
<span class="n">minority</span> <span class="o">=</span> <span class="n">reg_df</span><span class="p">[</span><span class="n">reg_df</span><span class="p">[</span><span class="s1">&#39;6_month_complete&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">majority</span> <span class="o">=</span> <span class="n">reg_df</span><span class="p">[</span><span class="n">reg_df</span><span class="p">[</span><span class="s1">&#39;6_month_complete&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>

<span class="c1"># Randomly undersample majority class to be size of minority</span>
<span class="n">majority_under</span> <span class="o">=</span> <span class="n">majority</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">minority</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># Combine together again</span>
<span class="n">reg_df_under</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">majority_under</span><span class="p">,</span> <span class="n">minority</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1"># Demonstrate counts</span>
<span class="n">reg_df_under</span><span class="p">[</span><span class="s1">&#39;6_month_complete&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0    109321
1    109321
Name: 6_month_complete, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">logistic_regression</span><span class="p">(</span><span class="n">reg_df_under</span><span class="p">,</span> <span class="n">standardise</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">res</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>defaultdict(list,
            {&#39;feature_weights&#39;: [array([[ 0.05061606, -0.12742546,  0.07198772,  0.04368519, -0.47087918]]),
              array([[ 0.05843797, -0.1295769 ,  0.06728217,  0.04437875, -0.47091139]]),
              array([[ 0.05440457, -0.12356035,  0.0743523 ,  0.0428499 , -0.47194244]]),
              array([[ 0.04749379, -0.12175285,  0.07393638,  0.04520857, -0.47334115]]),
              array([[ 0.05406446, -0.13207935,  0.07556783,  0.04398249, -0.47095444]])],
             &#39;accuracy&#39;: 0.5707784485912917,
             &#39;confusion&#39;: array([[10977, 10871],
                    [ 7898, 13982]]),
             &#39;fpr&#39;: array([0.00000000e+00, 4.57707799e-05, 4.57707799e-05, ...,
                    9.99679605e-01, 9.99771146e-01, 1.00000000e+00]),
             &#39;tpr&#39;: array([0.00000000e+00, 0.00000000e+00, 1.82815356e-04, ...,
                    1.00000000e+00, 1.00000000e+00, 1.00000000e+00]),
             &#39;roc_auc&#39;: 0.6073165240213756})
</pre></div>
</div>
</div>
</div>
<p>Very low accuracy - 0.57 - model is unusable (you almost might as well flip a coin).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Receiver Operating Characteristic&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s1">&#39;fpr&#39;</span><span class="p">],</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;tpr&#39;</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span>
         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;AUC=</span><span class="si">%0.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;roc_auc&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower right&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;r--&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;True Positive Rate&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;False Positive Rate&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f652d1e9c7a156a490894fd5dea090c81804c76c9af8e40b0312d881063e4386.png" src="_images/f652d1e9c7a156a490894fd5dea090c81804c76c9af8e40b0312d881063e4386.png" />
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="sam1_correlations.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Correlations between features</p>
      </div>
    </a>
    <a class="right-next"
       href="sam2_disability_6months_results.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Disability at six months (results)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#context-about-measurement-of-disability">Context about measurement of disability</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aims">Aims</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#purpose-of-this-analysis">Purpose of this analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#set-up">Set up</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#completion-of-data-on-disability-at-six-months">Completion of data on disability at six months</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#factors-associated-with-completion">Factors associated with completion</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multiple-logistic-regression">Multiple logistic regression</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset">Dataset</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regression">Regression</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random-undersampling">Random undersampling</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By SAMueL-2 team
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>